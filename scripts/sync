#!/usr/bin/env sh

# check if hakuneko repo exists
if [ ! -d ".hakuneko" ]; then
    git clone https://github.com/manga-download/hakuneko.git .hakuneko --depth 1
fi
# check if hakuneko repo is up-to-date
cd .hakuneko
git fetch origin
if [ "$(git rev-parse HEAD)" != "$(git rev-parse origin/master)" ]; then
    git pull origin master
fi

# sync connectors to repository
rm -rf ../src/plugins/connectors
cp -R src/web/mjs/connectors ../src/plugins

# remove unsupported connectors
rm -rf ../src/plugins/connectors/system
rm -rf ../src/plugins/connectors/templates/@Samples.mjs
rm -rf ../src/plugins/connectors/Allanimesite2.mjs
rm -rf ../src/plugins/connectors/AzoraManga.mjs
rm -rf ../src/plugins/connectors/AnimePahe.mjs
rm -rf ../src/plugins/connectors/BilibiliComics.mjs
rm -rf ../src/plugins/connectors/BilibiliManhua.mjs
rm -rf ../src/plugins/connectors/CocoManHua.mjs
rm -rf ../src/plugins/connectors/Comikey.mjs
rm -rf ../src/plugins/connectors/CrunchyScan.mjs
rm -rf ../src/plugins/connectors/JapScan.mjs
rm -rf ../src/plugins/connectors/LectorManga.mjs
rm -rf ../src/plugins/connectors/MangAs.mjs
rm -rf ../src/plugins/connectors/MangaDig.mjs
rm -rf ../src/plugins/connectors/MangaFoxFun.mjs
rm -rf ../src/plugins/connectors/MangaGo.mjs
rm -rf ../src/plugins/connectors/MangaHereFun.mjs
rm -rf ../src/plugins/connectors/MangaHub.mjs
rm -rf ../src/plugins/connectors/MangaKakalotFun.mjs
rm -rf ../src/plugins/connectors/MangaKu.mjs
rm -rf ../src/plugins/connectors/MangaOnlineFun.mjs
rm -rf ../src/plugins/connectors/MangaReaderSite.mjs
rm -rf ../src/plugins/connectors/MangaReaderTo.mjs
rm -rf ../src/plugins/connectors/NineAnime.mjs
rm -rf ../src/plugins/connectors/TencentComic.mjs
rm -rf ../src/plugins/connectors/TuMangaOnline.mjs
rm -rf ../src/plugins/connectors/UnnieGL.mjs
rm -rf ../src/plugins/connectors/Zebrack.mjs
rm -rf ../src/plugins/connectors/Zebrack.proto


# List of strings to search for
search_strings=(
"Ace scans"
"ahstudios.net"
"aiinscan"
"akaiyuhimun"
"akumanotenshi"
"alkyonescans"
"Aloalivn"
"Alphascans"
"amascan"
"ancientempirescan"
"angelofresistance"
"Animangaes"
"animecenterscan"
"AniRune"
"Anitationarts"
"anivizyon"
"anubisscans"
"apoloteam"
"arangscans.com"
"artemisnofansub"
"asgard1team"
"assortedscans.com"
"BacaKomikID"
"BananaMecanica"
"BatoScan"
"bestmanhua"
"betafox"
"Biamam Scans"
"Birmanga"
"BlackArmy"
"BlackDragonsFansub"
"blmanhwaclub"
"Buka"
"Bx117"
"caisemh"
"cat-translator"
"CatManga"
"chiotaku"
"ComicClear"
"ComicDom"
"ComicFX"
"comico-novel"
"comiconline"
"ComicVN"
"cronosscan"
"cutiepie"
"darkskyprojects"
"darkyuerealm"
"daum"
"Deliscan"
"DetectiveConanAR"
"diabolickscan"
"DOUJINLAND"
"doujinmitai"
"drkmangas"
"dropescan"
"duniakomik"
"eclypsescan"
"edelgardescans"
"einherjarscans"
"eromanhwas"
"eternalscans"
"evascans"
"exhentai"
"fdmscan"
"FenixScan"
"fenixscanlator"
"finalscans"
"fizmanga"
"FlameScan.fr"
"ForgottenScans"
"Frscans.ws"
"fudidoscan"
"Fukushuu no yuusha"
"Funbe"
"Funlist"
"FurioScan"
"Fusion scanlation"
"gabutscans"
"geassscan/hentai"
"geceninlordu"
"genkan"
"getmanhwa.co"
"GloryScans"
"GloryScansHentai"
"GloryScansTR"
"goddessmanga"
"godsrealmscan"
"gogomanga"
"golden-manga (arabic)"
"grafimanga"
"GrazeScans"
"guoman8"
"gurukomik"
"hakaiscan"
"happy tea scans"
"HastaTeamDDT"
"Hatigarm Scans"
"hatsukimanga"
"hellunatoon"
"HentaiMimi"
"HentaiMoney"
"hentainexus"
"hentaishark"
"HeroScan"
"herozscans"
"HFusionScanlation"
"Hidoku Ã‡eviri"
"himera-fansub"
"hobbyjapan"
"hocvientruyentranh"
"HoduComics"
"HoshikuzuuScans"
"HoshiNoFansub"
"HunlightScans"
"Hunter Fansub"
"hzmangas"
"ichirinnohanayuriscan"
"ikifeng"
"IlluminatiManga"
"IMangaScans"
"imperfectcomic"
"Imperio dos Otakus"
"infernalvoidscans"
"iskultripscans"
"itaScan"
"japanime"
"Japit Comics"
"JiroComics"
"JJutsuScans"
"JokerFansub"
"jpm1234"
"Jpmangas"
"jumpbookstore"
"justforfun"
"kaguyadex"
"KaiManhua"
"KaisarKomik"
"kangaryuteam"
"KanMan"
"karatcam"
"kirishimafansub"
"KKJScans"
"KlanKomik"
"KokoMH"
"kombatch"
"KomikGoID"
"komikgue"
"KomikLabIND"
"komikmama"
"komikmanga"
"komikplay"
"komikru"
"komiksave"
"komikstation"
"KomikTap (MDO)"
"komiscans"
"koomanga"
"krakenscans"
"kraw"
"kumamanga"
"kuman5"
"latestmanga"
"LazyBoysScan"
"leermanhua"
"LegionAsia"
"leitor"
"lemonjuicescan"
"LeoManga"
"leviatanscans-es"
"leviatanscans-xxx"
"Lilyreader"
"LimaScans"
"lindovel"
"lirescan"
"LittleMonsterScan"
"LordManga"
"lovablesubs"
"lshiver"
"luxyscans"
"mabushimajo"
"madokami"
"manamoa"
"manga-nato"
"Manga1st"
"Manga365"
"manga3x"
"Manga41"
"Manga68"
"manga9"
"manga99"
"mangaarabics"
"MangaArabTeam"
"mangaarchive"
"mangabilgini"
"mangaboruto"
"mangaboss"
"mangacat"
"mangacave"
"mangacruzers"
"mangadisk"
"MangaDNA"
"mangadods"
"mangaedenEN"
"mangaedenIT"
"mangafast"
"Mangafest"
"mangaforall"
"mangafull"
"mangagecesi"
"MangaGenki"
"mangagohan"
"mangahane"
"mangahanta"
"Mangahay(bulumanga)"
"MangaHereToday"
"mangahis"
"mangahispano"
"mangahost"
"mangaichiscans"
"MangaindoMe"
"mangacdn"
"MangaIndoWeb"
"mangajinnofansub"
"mangakakalots"
"Mangakakalots.com"
"mangarawto"
"mangakane"
"MangaKid"
"mangakio"
"mangakisa"
"mangakitsu"
"mangalaw"
"mangalib.me"
"MangaLivre"
"mangalord"
"MangaMitsu"
"Manganelo (by anyACG)"
"Manganelo link"
"manganelo.info"
"manganelo.me"
"MangaNeloInfo"
"MangaNeloLink"
"manganeloteam"
"manganelotoday"
"manganettr"
"manganine"
"MangaOku"
"MangaOnline"
"MangaOnlineBR"
"mangapanda"
"mangaparktoday"
"MangaPL"
"mangaproz"
"Mangaraw Online"
"MangarawOnline"
"mangarawr"
"mangarawr.com"
"mangareader.tv"
"MangaReaderPro"
"MangaReceh"
"mangaroma"
"MangaRoom"
"mangarose"
"MangaRow"
"MangaScouts"
"mangasepeti"
"MangaShow"
"MangasRaw"
"mangastein"
"MangasTK"
"mangastream (anyacg)"
"mangastream.cc"
"mangastreamCC"
"MangaStreamToday"
"mangasusu"
"MangaSusu Reborn"
"MangaSusuReborn"
"MangaTail"
"Mangateca"
"MangaTensei"
"MangaTopya"
"mangatoread"
"Mangatoro"
"MangaToro (JA)"
"MangaToro (VI)"
"MangatoroJA"
"MangatoroVI"
"MangaTownOnline"
"MangaTurf"
"mangavadisi"
"MangaWar"
"mangawindow (anyacg)"
"mangaworth"
"Mangax18"
"mangayaku"
"mangayosh"
"MangaYuca"
"MangaYurdu"
"MangaZone"
"mangazone.cc"
"MangaZuki"
"Mangazuki Archive"
"Mangazuki RAWS"
"Mangazuki Scans"
"MangaZukiArchive"
"MangaZukiClub"
"MangaZukimobi"
"MangaZukiOnline"
"MangaZukiScans"
"MangaZukiSite"
"Mangkomik"
"ManHua1359"
"ManHua36"
"manhuabei"
"manhuabox"
"manhuadex"
"Manhuadex"
"ManhuaDragon"
"ManHuaFen"
"ManhuaID"
"manhuaindex"
"ManHuaNiu"
"manhuaz"
"ManhwaHentai"
"ManhwaID"
"ManhwaPool"
"ManhwaSmut"
"ManhwaTaro"
"manhwatime"
"manhwatime.xyz"
"ManhwaWorld"
"Manmankan"
"MarkScans"
"MarkScansHentai"
"martialmanga"
"martialmanga"
"martialscans"
"masterkomik"
"MataKomik"
"matakomik"
"MerakiScans"
"MethodScans"
"MiracleScans"
"MiradScanlator"
"MiScans"
"MixedManga"
"MuchoDoujins"
"mundomangakun"
"Mundomangakun"
"MundoWuxia"
"mynovel"
"naniscans"
"NazarickScans"
"nekobreakerscan"
"NekoScan"
"NeoProjectScans"
"Neoxxx Scanlator"
"NineEkor"
"ninemanganet"
"NinjaScan"
"ninjascan/ninjascans"
"ninjascans"
"Ninjavi"
"NovelFrance"
"NoxSubs"
"noxsubs"
"ntsvoidscans"
"OffScan"
"Okamiyomi"
"OlaoeManga"
"OlhoDaLua"
"OnePunchMan"
"oneshotscans"
"OneTimeScans"
"OniScans"
"OnManga"
"OrigamiOrpheans"
"OtakuSekaiScan"
"OwScan"
"painfulnightz"
"patatescan"
"PCNet"
"PervEden"
"PervEdenIT"
"phenomenalnofansub"
"PhoenixFansub"
"PhoenixFansub"
"PhoenixScans"
"PhoenixSerenade"
"PiedPiper"
"Piscans"
"PMScans"
"PMScansArchive"
"pocketangelscans"
"PowerManga"
"ProjectTime"
"PsychoPlay"
"Puzzmos"
"Qimiaomh"
"Queens Manga"
"rachelscanlator"
"raiderscans"
"randomtranslations"
"rawmangas"
"RawMangaSite"
"RawMangaUpdate"
"Read Hentai"
"ReadComicBooksOnline"
"readhent.ai"
"ReadHentai"
"readhentaimanga"
"ReadMangaEU"
"readmangatv"
"ReadManhwa"
"ReadRawManga"
"ReadRawMangaInfo"
"ReadWebtoons"
"realmscansarabic"
"Reaper Scans"
"RedRibbon"
"Renascence Scans"
"Riceballicious"
"roozfun"
"RoseliaScanlations"
"Russification"
"S2Scans"
"sa3i9a"
"Sakurafansub"
"ScanFR"
"scanlatorhunters"
"ScanOP"
"ScansMangas"
"ScansRaw"
"scantrad"
"SDLG FANSUB"
"sdlgfansub"
"seaotterscans"
"Seikouscans"
"SeinagiAdultoFansub"
"sensescans"
"sensescans"
"sereinscans"
"Seven king scanlation"
"SheaManga"
"ShieldManga"
"ShieldManga.club"
"ShimadaScans"
"Shinzooscan"
"shinzooscans"
"shiraiscans"
"shoujohearts"
"ShoujoSense"
"shoumanhua"
"siberowl"
"silentskyscans"
"sindriascanlator"
"sisigelap"
"sixiangscans"
"Sixmh7"
"Siyahmelek"
"SKScans"
"SKSubs"
"Sksubs"
"Skymanga"
"skymanhwa"
"SleepyPandaScans"
"Smack Jeeves"
"SmackJeeves"
"SmashScan"
"SodaScan"
"Sodascan"
"SolitarioNoFansub"
"SoManga"
"somangas"
"SOSScanlation"
"SpartanManga"
"spottoon"
"SsgtScan"
"StormInHeaven"
"submanga.io"
"sugarbbscan"
"SwordManga"
"TapTrans"
"Teabeer Comics"
"TenshiMoe"
"The Apollo Team"
"The Nonames Scans"
"TheCatScans"
"TheNoNames"
"TheTopComic"
"ThreeQueensScanlator"
"thundernovels"
"TiempoDeWebeo"
"tiempodewebeo"
"TimelessLeaf"
"ToonilyNet"
"toonlatino"
"toonmanga"
"ToonSarang"
"TrashScanlations"
"TreDrage"
"TrueColorsScan"
"truecolorsscans"
"truyenchon"
"truyentranhaudio"
"truyentranhaudioonline"
"tsubakinoscan"
"TsubasaSociety"
"TumangaNET"
"TuMangaOnline Fun"
"turkcemanga"
"turkcraft"
"tusmangasonline"
"TvYManga"
"TwentyFourManga"
"twilightscans"
"twistedhelscans"
"U17"
"UnEmployedScans"
"UnionMangas"
"UniversoYuri"
"unniegl"
"UyuyanBalik"
"valhallascans"
"vaposcan"
"verytoon"
"Vinmanga"
"Visbellum"
"Wakascan"
"wantedteam"
"warqueenscan"
"WebComicMe"
"WEBMANGATR"
"WebNovelLive"
"Webtoonily"
"wecomics"
"WeiboManhua"
"whatstatus"
"White Cloud Pavilion"
"WhiteCloudPavilion"
"WIBTranslation"
"WonderlandWebtoons"
"WorldRomanceTranslation"
"wowescans"
"wuqimh"
"WutopiaComics"
"XAnimeSeduccion"
"XunScans"
"xxx.leviatanscans.com"
"YamiTenshiNoFansub"
"YaoiFanClube"
"YaoiIsLife"
"YaoiToshokan"
"Yayu Pw"
"yayutoon"
"YesMangasBR"
"YokaiJump"
"YoManga"
"YouBa Manga (2019)"
"YouBaManga"
"YouBaMangaNext"
"YuriISM"
"zmanga"
"zuimh"
)

# Directory to search in
search_directory="../src/plugins/connectors"

# Iterate over each search string
for search_string in "${search_strings[@]}"; do
    # Find files containing the exact search string (ignore case) and remove them
    grep -rilw --include='*' --exclude-dir='templates' -e "super.id = '$search_string'" -e "super.label = '$search_string'" "$search_directory" | xargs -d '\n' rm -f  grep 
done

